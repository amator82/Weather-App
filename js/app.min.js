(()=>{"use strict";const e=document.getElementById("root"),i=document.getElementById("popup"),t=document.getElementById("close"),n=document.getElementById("text-input"),s=document.getElementById("form");let c={city:" Alaska",feelsLike:0,temperature:0,observationTime:"00:00 AM",isDay:"yes",weatherDescriptions:"",properties:{windSpeed:{},humidity:{},visibility:{},cloudCover:{},pressure:{},uvIndex:{}}};const r=async()=>{try{const e=localStorage.getItem("query")||c.city,i=await fetch(`http://api.weatherstack.com/current?access_key=e7e97a51b9194b3b05595013b2998657&query=${e}`),t=await i.json(),{current:{feelslike:n,cloudcover:s,temperature:r,humidity:o,observation_time:d,pressure:l,visibility:p,uv_index:u,is_day:v,weather_descriptions:y,wind_speed:m},location:{name:g}}=t;c={...c,feelsLike:n,temperature:r,observationTime:d,isDay:v,city:g,weatherDescriptions:y[0],properties:{windSpeed:{title:"windSpeed",value:`${m}km/h`,icon:"wind.png"},humidity:{title:"humidity",value:`${o}%`,icon:"humidity.png"},visibility:{title:"visibility",value:`${p}%`,icon:"visibility.png"},cloudCover:{title:"cloudCover",value:`${s}%`,icon:"cloud.png"},pressure:{title:"pressure",value:l/100+" ",icon:"gauge.png"},uvIndex:{title:"",value:`${u}`,icon:"uv-index.png"}}},a()}catch(e){console.log(e)}},o=()=>{i.classList.toggle("active")},a=()=>{e.innerHTML=(()=>{const{city:e,weatherDescriptions:i,observationTime:t,temperature:n,isDay:s,properties:r}=c;return`\n    <div class="container ${"yes"===s?"is-day":""}">\n        <div class="top">\n            <div class="city">\n                <div class="city__subtitle">Weather today in</div>\n                <div class="city__title" id="city">\n                    <span>${e}</span>\n                </div>\n            </div>\n            <div class="city__info info-city">\n                <div class="top-left">\n                    <img class="icon" src="../../img/${(e=>{switch(e.toLowerCase()){case"overcast":return"partly.png";case"sunny":return"sunny.png";case"cloud":case"partly cloudy":return"cloud.png";case"fog":return"fog.png";case"clear":return"clear.png";default:return"the.png"}})(i)}" alt="" />\n                    <div class="description">${i}</div>\n                </div>\n                <div class="top-right">\n                    <div class="info-city__subtitle">\n                        as of ${t}\n                    </div>\n                    <div class="info-city__title">${n}Â°</div>\n                </div>\n            </div>\n        </div>\n        <div id="properties">${(e=>Object.values(e).map((({title:e,value:i,icon:t})=>`\n            <div class="property">\n                <div class="property__icon">\n                    <img src="../../img/icons/${t}" alt="" />\n                </div>\n                <div class="property__info info-property">\n                    <div class="property-info__value">${i}</div>\n                    <div class="property-info__description">${e}</div>\n                </div>\n            </div>\n            `)).join(""))(r)}</div>\n    </div>`})(),document.getElementById("city").addEventListener("click",o)};s.addEventListener("submit",(e=>{e.preventDefault();const i=c.city;if(!i)return null;localStorage.setItem("query",i),r(),o()})),n.addEventListener("input",(e=>{c={...c,city:e.target.value}})),t.addEventListener("click",(e=>{i.classList.remove("popup"),i.classList.add("popup-close")})),r()})();